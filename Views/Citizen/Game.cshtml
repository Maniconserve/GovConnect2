<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bike Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
        }

        canvas {
            border: 2px solid #000;
        }
    </style>
</head>
<body>

    <canvas id="gameCanvas"></canvas>

    <script>
        // Set up the game canvas
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = 800;
        canvas.height = 400;

        // Game variables
        let bikeX = 50, bikeY = canvas.height - 100, bikeWidth = 40, bikeHeight = 40;
        let bikeSpeed = 4, bikeDirection = "RIGHT";
        let obstacles = [];
        let score = 0;
        let gameInterval;
        let jumpSpeed = 5;
        let isJumping = false;
        let jumpDirection = 1; // 1 for going up, -1 for going down
        let obstacleInterval;

        // Bike and obstacle properties
        const bike = new Image();
        bike.src = "https://img.icons8.com/ios/452/bicycle.png"; // You can replace this with your own bike image

        const obstacleWidth = 10, obstacleHeight = 30;
        const obstacleLineY = canvas.height - 100; // Obstacles will appear at this Y position

        // Function to create random obstacles in a single line
        function createObstacle() {
            let obstacleX = canvas.width;
            obstacles.push({ x: obstacleX, y: obstacleLineY });
        }

        // Function to draw bike and obstacles
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw bike (if jumping, adjust Y position to simulate jump)
            ctx.drawImage(bike, bikeX, bikeY - (isJumping ? jumpDirection * 10 : 0), bikeWidth, bikeHeight);

            // Move and draw obstacles
            for (let i = 0; i < obstacles.length; i++) {
                const obs = obstacles[i];
                obs.x -= 3; // Move obstacles from right to left

                // Draw obstacle
                ctx.fillStyle = "red";
                ctx.fillRect(obs.x, obs.y, obstacleWidth, obstacleHeight);

                // Check for collision (bike and obstacle must overlap)
                if (obs.x < bikeX + bikeWidth && obs.x + obstacleWidth > bikeX &&
                    obs.y < bikeY + bikeHeight - (isJumping ? jumpDirection * 10 : 0) &&
                    obs.y + obstacleHeight > bikeY - (isJumping ? jumpDirection * 10 : 0)) {
                    endGame();
                }

                // Remove obstacles that go off-screen
                if (obs.x + obstacleWidth < 0) {
                    obstacles.splice(i, 1);
                    score++; // Award points for avoiding an obstacle
                }
            }

            // Display score
            ctx.font = "20px Arial";
            ctx.fillText("Score: " + score, 10, 30);

            // Check if game is over
            if (bikeY - (isJumping ? jumpDirection * 10 : 0) > canvas.height - bikeHeight || bikeY - (isJumping ? jumpDirection * 10 : 0) < 0) {
                endGame();
            }
        }

        // Function to handle key presses (bike movement)
        function moveBike(event) {
            if (event.key === "ArrowUp" && !isJumping) {
                isJumping = true;
                jumpDirection = 1;  // Start going up
            }
        }

        // Function to handle the jumping mechanism
        function handleJump() {
            if (isJumping) {
                if (jumpDirection === 1 && bikeY > canvas.height - 150) {  // Jump upwards limit
                    bikeY -= jumpSpeed;  // Move bike up
                } else if (jumpDirection === 1 && bikeY <= canvas.height - 150) {
                    jumpDirection = -1; // Start falling
                } else if (jumpDirection === -1 && bikeY < canvas.height - 100) {
                    bikeY += jumpSpeed;  // Fall down
                } else {
                    isJumping = false;
                }
            }
        }

        // Function to end the game
        function endGame() {
            clearInterval(gameInterval);
            clearInterval(obstacleInterval);
            alert("Game Over! Your Score: " + score);
        }

        // Start the game
        function startGame() {
            obstacles = [];
            score = 0;
            bikeY = canvas.height - 100;  // Ensure the bike starts at the correct Y position

            // Start the game loop for bike movement and obstacle handling
            gameInterval = setInterval(() => {
                handleJump();  // Update jumping logic
                draw();
            }, 20);

            // Create obstacles at a timed interval (add a delay between obstacle spawns)
            obstacleInterval = setInterval(() => {
                createObstacle();
            }, 2000);  // Create an obstacle every 2 seconds
        }

        // Event listener for key presses
        document.addEventListener("keydown", moveBike);

        // Start the game when the page loads
        startGame();
    </script>

</body>
</html>
